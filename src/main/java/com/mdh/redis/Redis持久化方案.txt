1、 Rdb 方式（Redis DataBase）
Redis 默认的方式，redis 通过Snapshot快照方式将数据持久化到磁盘中。恢复时直接从文件读到内存中。
Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到整个过程中，待持久化过程都结束，再用这个临时文件替换上次持久化的文件。
fork的作用是复制一个与当前进程一样的进程，新进程的所有数据（变量、环境变量、程序计数器）数值都和远进程一致，但是一个全新的线程，并作为原进程的子线程。
(1.1) 设置持久化快照的条件
在 redis.conf 中修改持久化快照的条件：
save 900 1
save 300 10
save 60 10000
(1.2) 持久化文件的存储目录
在 redis.conf 中可以指定持久化文件的存储目录
dbfilename dump.rdb
dir ./
(1.3) Rdb的问题
一旦redis非法关闭，那么会丢失最后一次持久化之后的数据。
如果数据不重要，则不必要关心。 如果数据不能允许丢失，那么要使用 aof 方式。



2、Aof方式（Append Only File）
Redis 默认是不使用该方式持久化的。Aof 方式的持久化，是操作一次 redis 数据库，则将操作的记录存储到 aof 持久化文件中。
·第一步：开启 aof 方式持久化方案。 将redis.conf中的appendonly改为yes，即开启aof方式的持久化方案。
  appendonly yes
·Aof文件存储的目录和rdb方式的一样。 Aof文件存储的名称
 appendfilename "appendloy.aof"
 在使用aof和rdb方式时，如果redis重启，则数据从aof文件加载。