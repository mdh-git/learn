# Dubbo

## Dubbo的架构设计？
~~~
Dubbo中架构设计有很多层次，并且每层都是可以扩展的
1.Proxy服务代理层，支持JDK动态代理、javassit等代理
2.Registry注册中心层，支持Zookeeper、redis等作为注册中心
3.Protocol远程调用层，支持Dubbo、Http等调用协议
4.Transport网络传输层，支持netty、mina等网络传输框架
5.Serialize数据序列化层，支持JSON、Hessian等序列化机制
~~~

## Dubbo支持哪些负载均衡策略？
~~~
1.随机：从多个服务提供者随机选择一个来处理本次请求，调用量大则分布越均匀，并支持按照权重设置随机概率
2.轮询：一次选择服务提供者来处理请求，并支持按权重进行轮询，底层采用的平滑加权轮询算法
3.最小活跃调用数：统计服务提供者当前正在处理的请求，下次请求过来则交给活跃最小的服务器来处理
4.一致性哈希：相同参数的请求总是发到同一个服务提供者
~~~

## Dubbo是如何完成服务导出的？
~~~
1.首先dubbo会将程序员所使用的的@DubboService注解或@Service注解进行解析得到程序员所定义的服务参数，包括定义的服务名、服务接口、服务超时时间、服务协议等，得到一个ServiceBean
2.然后调用ServiceBean的export方法进行服务导出
3.然后将服务信息注册到注册中心，如果有多个协议，多个注册中心，那就将服务按单个协议，单个注册中心进行注册
4.将服务信息注册到注册中心后，还会绑定一些监听器，监听动态配置中心的变更
5.还会根据服务协议启动对应的web服务器或网络框架，比如Tomcat、Netty等
~~~

## Dubbo是如何完成服务引入的？ 
~~~
1.当程序员使用@Reference注解来引入一个服务时，Dubbo会将注解和服务的信息解析出来，得到当前所有的服务名、服务接口是什么
2.然后从注册中心进行查询服务信息，得到服务的提供者信息，并存在消费端的服务目录中
3.并绑定一些监听器来监听动态配置中心的变更
4.然后根据查询得到的服务提供者信息生成一个服务接口的代理对象，并放入Spring容器中作为Bean
~~~