# Linux的命令
~~~
CPU
MEN 内存
~~~
## 整机 top
~~~
top
查看CPU 和 内存 运行的程序
load average(系统的额负载均衡): 1.61, 0.90, 0.41  代表1分钟,10分钟,15分钟 系统的平均负载
    三个值相加/3 > 60%  表示系统的负载压力重
uptime命令(top的精简版):系统性能命令的精简版
~~~

## CPU vmstat 查看CPU
~~~
vmstat -n 2 3
一般vmstat工具的使用是通过两个数字参数来完成的,第一个参数是采样的时间间隔数,单数秒。第二个参数是采样的次数
- procs
    r: 运行和等待CPU时间片的进程数,原则上1核的CPU的运行队列不要超过2,整个系统的运行队列不能超过总核数的2倍,否则代表系统压力过大
    b: 等待资源的进程数,比如正在等待磁盘I/O、网络I/O等

- cpu
    us: 用户进程消耗CPU的时间百分比,us值高,用户进程消耗CPU时间多,如果长期大于50%,优化程序。
    sy: 内核进程消耗的CPU时间百分比。
    us + sy 参考值为80%, 如果us+sy大于80%,说明可能存在CPU不足。

--------------
查看所有CPU核信息
    mpstat -P ALL 2(每两秒采样一次所有的CPU信息)

每个进程使用CPU的用量分解信息
    pidstat -u 1 -p 进程编号(每秒采样一次某个进程CPU的信息)

查看java进程
    ps -ef|grep java
~~~

## 内存 free
~~~
应用程序可用内存数

free(查看内存)
free -g(对参数四舍五入 单位是G)
free -m(对参数四舍五入 单位是M)

经验值
    应用程序内存/系统物理内存 > 70%  内存充足
    应用程序内存/系统物理内存 < 20%  内存不足,需要增加内存
    20% < 应用程序内存/系统物理内存 < 70% 内存基本够用


pidstat -p 进程号 -r 采样间隔数
~~~

## 磁盘 df
~~~
查看磁盘剩余空间数
df -h
~~~

## 磁盘IO iostat
~~~
磁盘性能(mysql 大表的操作 占用磁盘性能)

iostat -xdk 2 3
    rkB/s 每秒读取数据量kB
    wkB/s 每秒写入数据量kB
    svctm I/O 请求的平均服务时间,单位是毫秒
    await I/O 请求的平均等待时间,单位是毫秒;值越小,性能越好
    util 一秒钟有百分之几的时间用于I/O操作。接近100%时,表示磁盘带宽跑满,需要优化程序或者增加磁盘;
    rkB/s、wkB/s根据系统应用不同会有不同的值,但又规律遵循:长期、超大数据读写,肯定不正常,需要优化程序读取。
    svctm的值与await的值很接近,表示几乎没有I/O等待,磁盘性能好
    如果await的值远高于svctm的值,则表示I/O队列等待太长,需要优化程序或更换更快磁盘

pidstat -d 采样间隔数 -p 进程号
~~~

## 网络IO ifstat
~~~
ifstat 1
各个网卡的in out
观察网络负载情况
程序网络读写是否正常
程序网络I/O优化
增加网络I/O带宽
~~~